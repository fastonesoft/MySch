@model MySch.Models.StudQueValid

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>新生注册 - 界面</title>

    <style type="text/css">
        .user_focus { height: 80px; overflow: hidden; position: relative; margin: 0 auto; }
        .user_focus .focus_slider { height: 80px; position: absolute; left: 0px; top: 0px; z-index: 111; }
        .user_focus .focus_slider .mask { height: 80px; overflow: hidden; float: left; display: inline; }
        .user_focus .focus_slider ul { height: 80px; margin-left: 0px; overflow: hidden; }
        .user_focus .focus_slider li { float: left; width: 96px; height: 64px; display: inline; overflow: hidden; margin: 8px 0px 0px 8px; }
        .user_focus .focus_slider li img { width: 96px; height: 64px; }
        .user_focus .focus_slider li a { display: block; width: 96px; height: 64px; overflow: hidden; background: #000; }
    </style>

    <script type="text/javascript">
        $(function () {

            //按键：焦点转移
            $(document).keypress(function (e) {
                if (e.which == 13) {
                    //输入聚焦
                    var errorID = $('.field-validation-error:first').attr('data-valmsg-for');
                    if (errorID) $('#' + errorID).focus();
                }
            });

            //聚焦
            $('#IDS, #studreg-grid-text').focus(function () {
                //清除网格
                $(this).val('');
                $('#studreg-grid').datagrid('loadData', { total: 0, rows: [] });
            });

            //身份查询
            DataGridSearchPress('#IDS', '#studreg-grid', '/StudReg/Get')
            //编号查询
            DataGridSearchPress('#studreg-grid-text', '#studreg-grid', '/StudReg/Search')

            //点击动作
            studreg = {
                //学籍查询
                que: function () {
                    //清除网格
                    $('#studreg-grid').datagrid('loadData', { total: 0, rows: [] });
                    DataGridNone('/StudReg/Query');
                },
                add: function () {
                    //清除网格
                    $('#studreg-grid').datagrid('loadData', { total: 0, rows: [] });
                    DataGridNone('/StudReg/Manu');
                },
                edit: function () {
                    DataGridRowID('#studreg-grid', '/StudReg/Edit');
                },
                reg: function () {
                    DataGridRowID('#studreg-grid', '/StudReg/Reg');
                },
                print: function () {
                    DataGridRows('#studreg-grid', '/StudReg/Print');
                }
            }

            //数据表格
            $('#studreg-grid').datagrid({
                fit: true,
                striped: true,
                nowrap: true,
                rownumbers: true,
                fitColumns: false,
                remoteSort: false,
                singleSelect: false,
                checkOnSelect: true,
                loadFilter: function (d) {
                    if (d.error) {
                        $.messager.alert('错误提示', d.message, 'error');
                        return { total: 0, rows: [] };
                    } else {
                        return d;
                    }
                },
                columns: [[
                    { field: 'ck', checkbox: true },
                    { title: '学校名称', field: 'FromSch', halign:'center', sortable: true, width: 170 },
                    { title: '姓名', field: 'Name', align: 'center', sortable: true, width: 60 },
                    { title: '身份证号', field: 'IDS', align: 'center', sortable: true, width: 150 },
                    { title: '年级', field: 'FromGrade', align: 'center', sortable: true, width: 80 },
                    { title: '全国学籍号', field: 'NationID', align: 'center', sortable: false, width: 150 },
                    { title: '就读状态', field: 'ReadState', align: 'center', sortable: true, width: 100 },
                    {
                        title: '无问题学籍', field: 'IsProblem', align: 'center', sortable: false, width: 80,
                        formatter: function (value, row, index) {
                            //不输出任何东西
                        },
                        styler: function (value, row, index) {
                            if (!value) {
                                return "background:url('/Content/themes/icons/ico_yes.gif') no-repeat center center;";
                            }
                        }
                    },
                    {
                        title: '是否择校', field: 'SchChoose', align: 'center', sortable: false, width: 60,
                        formatter: function (value, row, index) {
                            //不输出任何东西
                        },
                        styler: function (value, row, index) {
                            if (value) {
                                return "background:url('/Content/themes/icons/ico_yes.gif') no-repeat center center;";
                            }
                        }
                    },
                    {
                        title: '是否注册', field: 'Reged', align: 'center', sortable: false, width: 60,
                        formatter: function (value, row, index) {
                            //不输出任何东西
                        },
                        styler: function (value, row, index) {
                            if (value) {
                                return "background:url('/Content/themes/icons/ico_yes.gif') no-repeat center center;";
                            }
                        }
                    },
                    {
                        title: '报名编号', field: 'StudNo', align: 'center', sortable: true, width: 100,
                        sorter: function (a, b) {
                            a = a.split('-');
                            b = b.split('-');

                            return (a[1] > b[1] ? 1 : -1);
                        }
                    }
                ]],

                toolbar: '#studreg-grid-tool',
                pagination: false,
                pageSize: 100,
                pageList: [100, 200, 500],
                pageNumber: 1,
            });


            //布局
            $('#studreg-lay').layout({
                border: true,
                fit: true
            });

        })
    </script>
</head>
<body>
    <div id="studreg-lay" class="easyui-layout">
        <div data-options="region:'center',border:false">
            <table id="studreg-grid"></table>
        </div>
    </div>

    <div id="studreg-grid-tool">
        <table cellpadding="0" cellspacing="0" style="white-space:nowrap; width:100%;">
            <thead>
                <tr>
                    <td width="213">
                        <div class="form-item-row" style="margin:5px;">
                            <label for="IDS">身份证号</label>
                            <span class="textbox">
                                <input class="textbox-text" id="IDS" style="width:165px;" />
                            </span>
                        </div>
                    </td>
                    <td width="170">
                        <a href="javascript:void(0);" class="easyui-linkbutton" iconcls="icon-add" plain="true" onclick="studreg.que();">查询学籍</a>
                        <a href="javascript:void(0);" class="easyui-linkbutton" iconcls="icon-add" plain="true" onclick="studreg.add();">手动添加</a>
                    </td>
                    <td width="10">
                        <div class="datagrid-btn-separator"></div>
                    </td>
                    <td width="120">
                        <a href="javascript:void(0);" class="easyui-linkbutton" iconcls="icon-edit" plain="true" onclick="studreg.edit();">编号</a>
                        <a href="javascript:void(0);" class="easyui-linkbutton" iconcls="icon-redo" plain="true" onclick="studreg.reg();">注册</a>
                    </td>
                    <td width="10">
                        <div class="datagrid-btn-separator"></div>
                    </td>
                    <td width="130">
                        <a href="javascript:void(0);" class="easyui-linkbutton" iconcls="icon-print" plain="true" onclick="studreg.print();">打印</a>
                    </td>
                    <td></td>
                    <td width="160">
                        <div class="form-item-row" style="margin:5px 5px 5px 5px;">
                            <label for="studreg-grid-text">编号查询</label>
                            <span class="textbox">
                                <input class="textbox-text" id="studreg-grid-text" style="width:135px;" />
                            </span>
                        </div>
                    </td>
                </tr>
            </thead>
        </table>
    </div>
</body>
</html>

