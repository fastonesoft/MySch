@model IEnumerable<MySch.Bll.View.VGradeStud>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>原班信息</title>
</head>
<body>

    @{
        var studstr = "<tr><td>{0}</td><td>{1}</td><td>{2}</td><td>{3}</td></tr>\n";
        var studstrs = string.Empty;
        var studban = string.Empty;
        foreach (var stud in ViewBag.Students)
        {
            if (studban == string.Empty)
            {
                studban = stud.OldBanNum;
            }
            else
            {
                if (stud.OldBanNum != studban)
                {
                    studban = stud.OldBanNum;
                    //打以前的输出
                    <table border="0" align="center" cellpadding="0" cellspacing="0" style="width:100%; height:96%;">
                        <tr><th>录取编号/原班级号</th><th>姓名</th><th>性别</th><th>现班级</th></tr>
                        @studstrs
                    </table>
                    <div style="page-break-after:always;"></div>

                    //清除
                    studstrs = string.Empty;
                }
            }
            studstrs += string.Format(studstr, stud.OldBan, stud.StudName, stud.StudSex, stud.BanNum);
        }
    }

    <script type="text/javascript">
        $(function () {
            //添加对话框
            DialogGrid('用户添加', 410, 270, '/AdminUser/AddToken',function(){} )
        })
    </script>
</body>
</html>
